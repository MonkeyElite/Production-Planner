{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "Cors": {
    "AllowedOrigins": [ "http://localhost:3000", "http://web:3000", "https://localhost:3000" ]
  },
  "AllowedHosts": "*",
  "ReverseProxy": {
    "ClientCertificates": {
      "GatewayToProducts": {
        "Path": "/run/secrets/gateway-to-products.pfx",
        "Password": ""
      },
      "BackendCa": {
        "Path": "/run/secrets/products-ca.crt"
      }
    },
    "Routes": {
      "products-route": {
        "Match": { "Path": "/api/products/{**catch-all}" },
        "ClusterId": "products",
        "Transforms": [
          { "RequestHeaderOriginalHost": "true" },
          { "X-Forwarded": "Append" }
        ]
      }
    },
    "Clusters": {
      "products": {
        "Destinations": {
          "d1": { "Address": "http://products-api:8080/" }
        }
        //"HttpClient": {
        //  "SslProtocols": "Tls13",
        //  "ClientCertificate": "GatewayToProducts"
        //}
      }
    }
  },
  "Jwt": {
    "Authority": "http://keycloak:8082/realms/production",
    "Audience": "gateway"
  },
  "ClientCertificateForwarding": {
    "HeaderName": "X-Client-Cert",
    "AllowedSubjects": [ "CN=pentest-client" ]
  },
  "Kestrel": {
    "Endpoints": {
      "Http": { "Url": "http://0.0.0.0:8080" },
      "Https": {
        "Url": "https://0.0.0.0:8443",
        "Certificate": {
          "Path": "/run/secrets/gateway-cert.pfx",
          "Password": ""
        }
      }
    }
  }
}
